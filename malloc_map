#include "include/solong.h"

int invalid_ext(char *filename)  //Check Name "ber"
{
	char *temp;

	temp = ft_strnstr(filename, ".ber", ft_strlen(filename));
	if (temp == NULL)
		return (1);
	else if (ft_strlen(temp) > 4)
		return (1);
	else
		return (0);
}

void malloc_map(t_game *game, char *filename)
{
	char *line;
	int	fd;
	int	i;

	fd = open_file(filename);
	line = get_next_line(fd);
	game->hei = 0;
	game->wid = ft_strlen(line) - 1;
	while (line)
	{
		free(line);
		line = get_next_line(fd);
		game->hei++;
	}
	close(fd);
	game->map.pos = (char **)malloc(game->map.height * sizeof(char *));
	i = -1;
	while (++i < game->map.height)
		game->map.pos[i] = (char *)malloc(game->map.width * sizeof(char *));
	while (1) //Check Square
	{
		line = get_next_line(fd);
		if (line == NULL)
			break ;
		if (game->map.width != ft_strlen(line))
		free(line);
	}
}
